{% extends "base.html" %}
{% block content %}

<h2>Shares</h2>
<p>
<div id="table"></div>
</p>

<script>
    const shareLabels = {
        id: "#",
        target_id: "Target",
        name: "Share",
        remark: "Remark",
        high_value: {
            name: "High Value",
            formatter: boolFormatter,
        },
        auth_access: {
            name: "Auth. access",
            formatter: boolFormatter,
        },
        guest_access: {
            name: "Guest access",
            formatter: boolFormatter,
        },
        write_access: {
            name: "Write access",
            formatter: boolFormatter,
        },
        read_level: "Read level",
        maxed_out: {
            name: "Maxed out",
            formatter: boolFormatter,
        },
    };
    async function main(){
        const db = await initDb();
        const data = db.exec("SELECT * FROM share")[0];
        const columns = data.columns.map(col => {
            if (shareLabels[col]) { return shareLabels[col] }
            else { return col }
        });

        new gridjs.Grid({
            columns: columns,
            data: data.values,
            style: {td: {'font-family': "monospace"}},
            pagination: {limit: 20},
            search: true,
            sort: true,
            resizable: true,
        }).render(document.getElementById("table"));
    };
    window.addEventListener("load", main);
</script>


{% endblock %}
